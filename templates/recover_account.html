<h2>Recover Your Account</h2>

{% if not code_generated %}
<form method="POST" action="{{ url_for('recover_account') }}">
    <label>Username:</label><br>
    <input type="text" name="username" required><br><br>
    <button type="submit" name="action" value="generate_code">Generate Recovery Code</button>
</form>
{% else %}
<p>Your recovery code:</p>
<pre>{{ recovery_code }}</pre>
<p>Use it below to reset your password:</p>

<form method="POST" action="{{ url_for('recover_account') }}">
    <input type="hidden" name="username" value="{{ username }}">
    <label>Recovery Code:</label><br>
    <input type="text" name="recovery_code" required><br><br>

    <label>New Password:</label><br>
    <input type="password" name="new_password" required><br><br>

    <button type="submit" name="action" value="reset_password">Reset Password</button>
</form>
{% endif %}